<!doctype html>
<html lang="en-GB">
<head>
  <meta charset="utf-8">
  <title>Performance Tester</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="./PerformanceTester.js"></script>
</head>
<body>
  <div id="tester"></div> 
  <script>
    const tester = new PerformanceTester(document.querySelector('#tester'));
    // tester.setOptions({
    //   // runs: '1-10[3,10]'

    // });
    tester.runs = [1, 3, 5, 10];
    tester.add({
      name: 'Math.random()*10',
      initFunction: () => {

      },
      initHtml: `
        <script src="./node_modules/@webcomponents/webcomponentsjs/webcomponents-lite.js"><\/script>
        <script>
          class ReferenceElement extends HTMLElement {
            sleep(milliseconds) {
              var start = new Date().getTime();
              for (var i = 0; i < 1e7; i++) {
                if ((new Date().getTime() - start) > milliseconds){
                  break;
                }
              }
            }
            constructor() {
              super();
              this.attachShadow({mode: 'open'});
            }
            connectedCallback() {
              this.shadowRoot.innerHTML = '<h1>In Shadow Dom</h1><slot></slot>'
              this.innerHTML = '<p>In Light Dom</p>';
              this.sleep(Math.random()*10);
            }
          }
          customElements.define('reference-element', ReferenceElement);
        <\/script>
      `,
      startFunction: () => {

      },
      testHtml: `
        <reference-element></reference-element>
      `
    });

    tester.add({
      name: 'Sleep 10',
      initFunction: () => {

      },
      initHtml: `
        <script src="./node_modules/@webcomponents/webcomponentsjs/webcomponents-lite.js"><\/script>
        <script>
          class ReferenceElement extends HTMLElement {
            sleep(milliseconds) {
              var start = new Date().getTime();
              for (var i = 0; i < 1e7; i++) {
                if ((new Date().getTime() - start) > milliseconds){
                  break;
                }
              } 
            }            
            constructor() {
              super();
              this.attachShadow({mode: 'open'});
            }
            connectedCallback() {
              this.shadowRoot.innerHTML = '<h1>In Shadow Dom</h1><slot></slot>'
              this.innerHTML = '<p>In Light Dom</p>';
              this.sleep(10);
            }
          }
          customElements.define('reference-element', ReferenceElement);
        <\/script>
      `,
      startFunction: () => {

      },
      testHtml: `
        <reference-element></reference-element>
      `
    });
  </script>

</body>
</html>
